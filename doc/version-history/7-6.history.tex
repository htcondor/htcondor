%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!
%%%      PLEASE RUN A SPELL CHECKER BEFORE COMMITTING YOUR CHANGES!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{\label{sec:History-7-6}Stable Release Series 7.6}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

This is a stable release series of Condor.
As usual, only bug fixes (and potentially, ports to new platforms)
will be provided in future 7.6.x releases.
New features will be added in the 7.7.x development series.

The details of each version are described below.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-10}Version 7.6.10}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.10 released on September 19, 2012.

\item This release contains several important security fixes and all users
should upgrade as soon as possible.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item \Security Some code that was no longer used was removed.  The presence
of this code could expose information which would allow an attacker to control
another user's job.  (CVE-2012-3493)

\item \Security Some code that was no longer used was removed.  The presence
of this code could have lead to a Denial-of-Service attack which would allow
an attacker to remove another user's idle job.  (CVE-2012-3491)

\item \Security Filesystem (FS) authentication was improved to check the UNIX
permissions of the directory used for authentication.  Without this, an
attacker may have been able to impersonate another submitter on the same submit
machine.  (CVE-2012-3492)

\item \Security Although not user-visible, there were multiple updates to
remove places in the code where potential buffer overruns could occur, thus
removing potential attacks.  None were known to be exploitable.

\item \Security Although not user-visible, there were updates to the code to
improve error checking of system calls, removing some potential security
threats.  None were known to be exploitable.


% https://access.redhat.com/security/cve/CVE-2012-349X


\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-9}Version 7.6.9}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.9 released on August 15, 2012.

\item \Security Fixed a critical problem with DNS handling.

\end{itemize}

\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item \Security Fixed a critical problem with DNS handling.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-8}Version 7.6.8}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.8 released on August 14, 2012.  It was pulled from the web on August 15 due to a problem in how it was built, and should not be used.  If you installed 7.6.8, please upgrade to 7.6.9 or later instead.

\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-7}Version 7.6.7}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.7 released on May 12, 2012.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Added the ability to delay reconfig in daemon core, and applied to the
\Condor{negotiator} to defer reconfiguration requests during the negotiation
cycle until after the cycle completes.
\Ticket{2931}

\item Fixed a potential infinite loop in the \Condor{gridmanager} for gt2
grid universe jobs. If the GRAM jobmanager was listening on a different
port than the \Condor{gridmanager} expected, the \Condor{gridmanager}
would alternate between states GM\_REGISTER and GM\_RESTART,
as visible in the \Condor{gridmanager} daemon log.
\Ticket{2916}

\item Added logic to the \Condor{negotiator} that enables job preemption 
to properly respect hierarchical group quotas.
\Ticket{2570}

\item Added logic to the \Condor{negotiator} to negotiate with full group 
quota instead of allocated-slots when no surplus sharing is in effect, to
address a bug where groups could fail to claim weighted slots.
\Ticket{2958}

\item Fixed a bug introduced in Condor version 7.6.2 that affects jobs run via
\Prog{glexec}.  
When \Prog{glexec} was configured in log-only mode, 
Condor failed to execute the job,
but reported that the job exited with exit code 1.
In such cases, 
the \Expr{stderr} of the job contained the following message:
\begin{verbatim}
fdpass_recv error on new_sock_fd
\end{verbatim}
\Ticket{2840}

\item Fixed a rare bug in which if the \Condor{startd} was configured 
to use partitionable slots,
it was possible for the \Condor{startd} to get partitioned into more slots
than there were resources.
That is, it was possible for a four cpu \Condor{startd}
to split into five slots.
\Ticket{2816}

\item Fixed a rare bug seen with parallel universe jobs,
in which if a claim was removed as the \Condor{shadow} was starting up, 
all ranks of the job would never completely start.
\Ticket{2786}

\item Fixed a bug that caused disk capacity to be under-reported 
on Windows platforms for drives with 1TB or more of free space.
\Ticket{2798}

\item Fixed a bug that caused communication failure in some cases,
 after the failure of authentication, when authentication was configured
to be optional.
\Ticket{2845}

\item Fixed a bug in which if the configuration variable \Macro{EVENT\_LOG} was 
set but the defined file was not writable,
the user's job log would not be written to. 
This bug would have been observable with DAGMan.
\Ticket{2858}

\item NorduGrid ARC LDAP servers that return attributes in an unexpected
order no longer cause the \Condor{gridmanager} to exit.
\Ticket{2888}

\item Condor failed to execute jobs when using \Prog{glexec} 
versions 0.9.0 through 0.9.5.
\Ticket{2907}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-6}Version 7.6.6}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.6 released on January 17, 2012.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a memory leak affecting the \Condor{schedd} when the
configuration variable
\Macro{EVENT\_LOG\_JOB\_AD\_INFORMATION\_ATTRS} and/or the submit
description file command \SubmitCmd{job\_ad\_information\_attrs} were used.
\Ticket{2730}

\item Fixed a bug in the Windows implementation of \Condor{chirp} that caused
it to always return a status of -1073740777 for \Condor{chirp}
 commands that succeeded.
\Ticket{2739}

\item Fixed a bug in the Windows implementation of \Condor{chirp} that caused
the \Opt{put}, \Opt{whoami}, \Opt{getdir}, and \Opt{fetch} 
\Condor{chirp} commands to always fail.
\Ticket{2743}

\item Fixed a bug in the checkpoint server that could cause it to abort and
crash during a file rename operation on RHEL6 and newer versions.
\Ticket{2738}

\item Fix a bug introduced in Condor version 7.6.5,
that could cause the \Condor{schedd} to exit with the following error:
\begin{verbatim}
ERROR "Send_Signal: sent unsafe pid (0)" at line 5492 in file
/home/condor/execute/dir_10444/userdir/src/condor_daemon_core.V6/daemon_core.cpp
\end{verbatim}
\Ticket{2736}

\item Fixed the example Linux startup script \File{condor.boot.rpm}
to no longer assume that the contents of file \File{/var/run} will 
persist across a reboot,
or that environment variable \Env{USER} is set.
\Ticket{2133}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-5}Version 7.6.5}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.5 released on December 28, 2011.

\item Restored the semantics of \Macro{GROUP\_AUTOREGROUP} to the
behavior it exhibited before Hierarchical Group Quotas were introduced
in Condor version 7.5.6.
That behavior has submitters with no accounting group,
which are listed as \Expr{<none>}, negotiate last.
And, in addition, any accounting groups with \MacroNI{GROUP\_AUTOREGROUP}
enabled negotiate both normally and then also along with the 
submitters with no accounting group.
For Condor versions 7.5.6 through 7.6.4, configuration variable
\MacroNI{GROUP\_AUTOREGROUP} (or \MacroNI{GROUP\_AUTOREGROUP\_<groupname>})
was a synonym for 
\Macro{GROUP\_ACCEPT\_SURPLUS} 
(or \MacroNI{GROUP\_ACCEPT\_SURPLUS\_<groupname>}).
They now implement distinct features,
and it is not legal to set both to \Expr{True} in the configuration
for the \Condor{negotiator}.
\Ticket{2679}

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Added explicit support for Linux kernels with a major version number of 3,
to detect and utilize the load average information.
\Ticket{2579}

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}


%\item Exposed the negotiation order of accounting groups to configuration
%via the configuration parameter \Macro{GROUP\_SORT\_EXPR}.
%\Ticket{2678}

\item Fixed a bug in Chirp when using absolute file paths. This bug caused
most MPI jobs to fail in the parallel universe.
\Ticket{2630}

\item Fixed a bug in mapping users using the \Macro{CERTIFICATE\_MAPFILE}
mechanism, where entries using the NTSSPI method on Windows would not be mapped
using the map file, but would instead fall back to just the user name.
\Ticket{2709}

\item Fixed a hierarchical accounting groups bug in which
the \Condor{schedd} did not properly restore accounting group 
information to submitters on a restart of the \Condor{schedd},
and therefore negotiated for and allocated machines incorrectly.
\Ticket{2705}

\item The Windows installer had a bad value set for the configuration variable
\Macro{JAVA\_CLASSPATH\_SEPARATOR}, causing java universe jobs to fail. 
\Ticket{2586}

\item \MacroNI{HDFS} was not listed in the default
\MacroNI{DC\_DAEMON\_LIST}, so the \Condor{hdfs} daemon exited
shortly after being started,
and the HDFS service did not run.
\Ticket{849}

\item File System (FS) authentication now works when \File{/tmp} 
is on a Btrfs file system.  Previously, authentication failed.
\Ticket{2583}

\item Fixed a bug that caused a failure to start jobs when using PrivSep
and supplemental group process tracking.  
Prior to Condor version 7.6.4, this problem
only occurred when \Macro{USE\_CLONE\_TO\_CREATE\_PROCESSES} was set
to \Expr{False}.  
In Condor version 7.6.4, the problem occurred regardless of the setting
of this configuration variable.
\Ticket{2658}

\item Fixed a performance problem on Windows platforms
that caused claim activations to
fail when more than about 8 jobs were already running on that machine.
\Ticket{2441}

\item Fixed a bug in which the submit event would not be written to the user
job log,
if the job was submitted with the \Opt{-remote} or \Opt{-spool} option to
\Condor{submit}.
\Ticket{2569}

\item Fixed a bug that caused \Condor{q} with the \Opt{-analyze} option
to fail,
if a job or a machine ClassAd contained a string attribute ending in 
a backslash.
This resulted in output of the error message
\begin{verbatim}
  Unable to process machine ClassAds
\end{verbatim}
or
\begin{verbatim}
  Unable to process job ClassAd
\end{verbatim}
\Ticket{2603}

\item Fixed a bug that caused the \Condor{startd} to crash when being
reconfigured,
if the reconfigure caused the \Condor{startd} to remove 
a running Daemon ClassAd Hook job.
\Ticket{2636}

\item Configuration variables of the form \MacroNI{MAX\_<SUBSYS>\_<LEVEL>\_LOG}
now work properly on 32-bit Linux platforms.
Previously, the corresponding log file would grow without bound.
\Ticket{2638}

\item Fixed a bug in which Condor would fail to properly detect that it 
was running as Local System for non-English versions of Windows.
The bug caused Condor to fail to run jobs on the slot accounts.
\Ticket{2642}

\item Fixed a bug in the Windows version of Condor,
in which the transfer of output failed due to the use of the Everyone account,
which lacks read permission.
Usage of the Everyone account occurred as a fallback,
when the account name failed to exist because it
included the domain of the local submit machine.
The fix adds the same capability as exists on Linux platforms,
which uses the user name without the domain.
\Ticket{2643}

\item Fixed a bug in which job submission via Condor-C could fail,
because it did not convert account names to fully qualified (including domain)
before comparing to see
if the current account was the same as the desired account.
\Ticket{2644}

\item Fixed a bug in which use of the submit command 
\SubmitCmd{transfer\_input\_files} did not work for directories on 
Windows platforms.
\Ticket{2387}

\item Fixed a bug that could cause a failure in cleaning up job processes
when using \Prog{glexec} after a restart of the \Condor{master} daemon.
\Ticket{2614}

\item Fixed a bug in \Condor{power} that caused it to fail when
operating on a machine with a 15-byte subnet mask string.
\Ticket{2651}

\item Fixed a bug that could cause the \Condor{schedd} to no longer start
idle jobs or send ClassAds to the \Condor{collector}.
\Ticket{2647}

\item Fixed a bug that could cause the \Condor{schedd} to crash if a
hold reason contained a percent character (\verb|%|),
and the user log for the job was in XML format.
\Ticket{2660}

\item Fixed a Windows 7 and Vista bug in \Condor{softkill},
in which it would fail to kill the target process,
when run by a Personal Condor inside a System Condor slot account.
\Ticket{2677}

\item A possible fix has been made for a problem in which the
CCB-enabled daemon took an unexpectedly long time to timeout when
reading from the CCB server.  Additional information is logged
to help identify the problem if it still remains.
\Ticket{2695}

\item Fixed a bug in \Condor{dagman} that occurred when 
dealing with nested splices.
\Condor{dagman} incorrectly issued a parse error and exited
in the case where the parent splice contained only splices, and no nodes jobs.
\Ticket{1751}

\item Fixed a bug that caused grid universe jobs submitted via SOAP to
be held when trying to write output files into the spool directory.
\Ticket{2568}

\item Fixed a bug that caused \Condor{credd} and possibly other
daemons to crash when the file used for \MacroNI{CERTIFICATE\_MAPFILE}
contained more than 80 entries.
\Ticket{2409}

\item Fixed a bug that caused hibernation to fail on certain Linux platforms
for certain hibernation states.
To work correctly on these Linux platforms,
the plug-in needs the command line arguments defined by
\Macro{HIBERNATION\_PLUGIN\_ARGS} when initially invoked, 
as well as for other invocations.  
\Ticket{2561}

\item The \Condor{schedd} now aborts the claim and reschedules the job,
if it does not hear from the \Condor{startd} for longer than the job
lease duration.
\Ticket{2706}

\item Fixed some bugs in the renewing of CREAM job leases. Before, the
\Condor{gridmanager} could fail to renew the leases or attempt to set
lease expirations in the past.
\Ticket{2351}
\Ticket{2455}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-4}Version 7.6.4}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

%\item Condor version 7.6.4 not yet released.
\item Condor version 7.6.4 released on October 21, 2011.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item The new Windows-only \Condor{rmdir} was included in Condor version 7.6.0,
but there was no version history entry for this introduced tool at release.
This item attempts to correct that oversight, 
as well as identify that usage of \Condor{rmdir},
instead of the built-in Windows \Prog{rmdir}, 
is enabled by default.
\Condor{rmdir} worked correctly in Condor version 7.6.0, 
contained a bug in Condor version 7.6.1,
and was fixed in Condor version 7.6.2.
\Ticket{1877}


\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item The new configuration variable \Macro{<Keyword>\_HOOK\_JOB\_EXIT\_TIMEOUT}
defines the number of seconds that the \Condor{starter} will wait
before continuing with a shut down,
if a hook defined by \MacroNI{<Keyword>\_HOOK\_JOB\_EXIT} has not completed.
The addition of this configuration variable fixes the bug described below.
\Ticket{2543}

\item The new configuration variable \Macro{SKIP\_WINDOWS\_LOGON\_NETWORK} 
is a boolean value which specifies whether the Windows
\Expr{LOGON\_NETWORK} authentication is skipped or not.
If skipped, Condor tries \Expr{LOGON\_INTERACTIVE} authentication first.
The addition of this configuration variable fixes the bug described below.
\Ticket{2549}  

% This actually should have gone into 7.6.1, where it was committed.
% It appears here in the 7.6.4 history by wrangler's order, without
% owning up to the improper appearance in this version.
\item The new configuration variable \Macro{SHADOW\_RUN\_UNKNOWN\_USER\_JOBS} 
defaults to \Expr{False}.
When \Expr{True}, 
it allows the \Condor{shadow} daemon to run jobs remotely submitted from 
users not in the local password file.
\Ticket{2004}

\end{itemize}
\noindent Bugs Fixed:

\begin{itemize}

%\item Properly support \Attr{MAX\_<subsys>\_LOG} values >= 2GB.
\item Implemented proper support of values greater than or equal to  2 GBytes
set for the configuration variable \Macro{MAX\_<SUBSYS>\_LOG}.
\Ticket{2471}

\item Updated the \Condor{negotiator} daemon's assessment of pool size 
to properly take partitionable slots into account.
See section ~\ref{sec:Configuring-SMP} for an explanation of 
partitionable slots on SMP machines.
\Ticket{2440}

\item Provided an informative error message 
when the \Condor{userprio} tool cannot locate the \Condor{negotiator} daemon.
\Ticket{2478}

\item \Condor{userprio} and the \Condor{negotiator} daemon 
did not correctly handle the names of submitters, 
when these names exceeded 63 characters in length.
The fix handles submitter names of arbitrary length.
\Ticket{2445}

\item Removed a spurious boolean flag reset in \Condor{q},
which resulted in an order dependency between the command line arguments
\Opt{-long} and \Opt{-format}.
\Ticket{2498}

\item Fixed a bug in which a graceful shutdown of a \Condor{startd}
did not correctly handle jobs using job deferral
which have landed on an execute machine but have not yet
reached their deferral time.
These jobs would appear to be running, despite the lack of
a \Condor{starter} daemon. 
These jobs now correctly transition to the idle state.
\Ticket{2486}

\item Corrected a hierarchical group quota bug in which
the user accounting mechanism in the \Condor{negotiator} daemon allowed 
submitter records to be deleted,
if the submitter's priority factor was explicitly set and
the value was equal to that defined by \MacroNI{DEFAULT\_PRIO\_FACTOR}.
\Ticket{2442}

\item Fixed CPU detection on Windows, such that the correct number of CPUs
is detected when there are more than 32 CPUs.
\Ticket{2381}

\item Fixed a memory leak in the \Condor{negotiator},
caused by the failure to
free memory returned from some calls to \Procedure{param\_without\_default}.
\Ticket{2299}

\item Jobs run via \Prog{glexec} always had their \Env{PATH} environment
variable cleared.  Now, if \Env{PATH} was specified for the job, 
in any of the ways that job environment may be specified, 
this setting is used.
\Ticket{2096}

\item Fixed an infinite loop that could happen in Condor daemons
shortly after the receipt of a new connection.  
This problem was introduced in Condor version 7.5.6.
\Ticket{2413}

\item Fixed a problem in \Condor{hdfs} that caused it to exit shortly
after starting up,
if the configuration variables 
\MacroNI{HDFS\_DENY}, \MacroNI{HOSTDENY\_WRITE}, or \MacroNI{HOSTDENY\_READ} 
were not defined.
Previously, if \MacroNI{HDFS\_DENY} was
not defined, \MacroNI{HOSTDENY\_WRITE} and \MacroNI{HOSTDENY\_READ}
were used to build the deny list.  
Now \MacroNI{DENY\_WRITE} and \MacroNI{DENY\_READ} are also used.
\Ticket{2414}

\item Removed an extra copy of the java files required to run gt4 and gt42
grid universe jobs. This does not affect Condor's operation.
\Ticket{2435}

\item Fixed a problem that caused the \Condor{schedd} to crash when
writing to some user logs with specific names.  The specific names that
caused crashes are not easy to describe.
\Ticket{2439}

\item Fixed a bug in which the \Condor{schedd} failed to start up
when any job ClassAd attribute value contained the ASCII character 255.
\Ticket{2450}

\item Fixed a bug in which \Condor{preen} failed to honor the 
\Opt{-remove} option, and would always remove lock files.
\Ticket{2497}

\item \Condor{preen} expected an old format for local lock file paths;
it now understands the proper format.
\Ticket{2496}

\item \Condor{preen} would EXCEPT when processing multiple 
subdirectories for local locks.
\Ticket{2495}

\item In 32-bit Condor binaries, the \Attr{ImageSize} of processes larger than 
4 GBytes was reported as 4 GBytes.  This limit has been raised to 4095 GBytes.

\item \SubmitCmd{vm} universe jobs using Xen or KVM would fail to start,
if the disk image files were transferred from the submit machine
and the default value defined for \Macro{LIBVIRT\_XML\_SCRIPT} was used.
The script did not provide absolute path names for the files.
\Ticket{2511}

\item Fixed a bug in which a completed Xen or KVM \SubmitCmd{vm} universe 
job's modified disk image files would not be transferred back 
to the submit machine.
\Ticket{2530}

\item Fixed a bug in which a \Condor{starter} configured to use job hooks 
could fail to run a job, 
but not wait for the job exit hook to complete before exiting.  
The bug fix introduces the new configuration variable
\Macro{<Keyword>\_HOOK\_JOB\_EXIT\_TIMEOUT},
which defines the number of seconds the \Condor{starter} will wait
before continuing with a shut down,
if the job exit hook has not completed.
\Ticket{2543}

\item In Condor version 7.5.4, an improvement was made to avoid reliance on
the machine specified by \MacroNI{NEGOTIATOR\_HOST} 
matching a reverse DNS look up of the \Condor{negotiator}.
However, this improvement was not made to the dedicated scheduler,
so matchmaking of parallel jobs was still subject to the
problems associated with the old algorithm.  
Now, the dedicated scheduler benefits from the same improved algorithm as the
non-dedicated scheduler.
\Ticket{2540}
  
\item Occasionally there have been problems with Windows 
\Expr{LOGON\_NETWORK} authentication,
leading to users being locked out from their account.
The new configuration variable \MacroNI{SKIP\_WINDOWS\_LOGON\_NETWORK},
when set to \Expr{True},
fixes the problem by allowing this mechanism to be skipped entirely,
instead proceeding straight to the \Expr{LOGON\_INTERACTIVE} authentication. 
This bug only affected users using the \Condor{credd}. 
\Ticket{2549}  

\item Condor now correctly groups CREAM jobs based on how CREAM servers 
authorize and map them.
The servers map them based on X.509 proxy subject name 
and first VOMS attribute. 
Previously, all VOMS attributes were considered.
This could cause unexpected behavior due to the aliasing of CREAM leases
and proxy delegations.
\Ticket{2271}

\item Communication errors in the job lease renewal protocol were
sometimes not correctly handled.  This resulted in the job being
killed.
\Ticket{2563}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item The manual now contains a manual page for \Condor{rmdir},
a Windows only replacement for the built-in Windows \Prog{rmdir}
introduced in Condor version 7.6.0.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-3}Version 7.6.3}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.3 released on August 23, 2011.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

\item Fixed a bug causing parallel universe jobs to be preempted upon 
renewal of the job lease, 
which by default happens within 20 minutes. 
This meant that essentially no parallel universe job that took
longer than 20 minutes would ever finish.
\Ticket{2317}

\item When the specified job requirements expression contained a
reference to \Attr{RequestMemory}, there was inconsistent behavior:
in some cases the default \Attr{RequestMemory} requirements were
suppressed, and in other cases not.  Now, the default
\Attr{RequestMemory} requirements are always suppressed when there
are explicit references to \Attr{RequestMemory} in the job
requirements.

\item Fixed a bug that could cause Condor to crash when using 
the Local Credential Mapping Service (LCMAPS) with
GSI authentication.
\Ticket{2340}

\item Fixed a bug that caused the \Condor{collector} daemon to crash
upon receiving a CCB command,
when \Macro{ENABLE\_CCB\_SERVER} was changed from \Expr{True} to \Expr{False}
without restarting the daemon.
\Ticket{2357}

\item The GT2 GAHP no longer consumes all of the CPU when compiled
with threaded Globus libraries.
\Ticket{2345}

\item Fixed a problem introduced in Condor version 7.5.6, 
which led to local lock files for user log locking always being created 
whether or 
not \MacroNI{ENABLE\_USERLOG\_LOCKING} was set to \Expr{False}.
\Ticket{2116}

\item Installation as a service by the MSI installer on Windows platforms 
now sets the default of Automatic Delayed.
\Ticket{2318}

\item In PrivSep mode, if started as \Login{root}, 
the \Condor{master} re-executes itself as the \Login{condor} user.
Previously, supplementary groups were preserved.
Now supplementary groups are cleared and set to the list of groups
to which the \Login{condor} user belongs.
\Ticket{2376}

% commit 3d145180fd55b0d50e74656765cebe561c840830
% commit fea686687f5dda08908e03b5595c517b3ddda03a
\item Fixed a bug where setting \Macro{DAGMAN\_PROHIBIT\_MULTI\_JOBS} to
\Expr{True} caused SUBDAGs to stop working.
\Ticket{2331}

\item Fixed a bug that caused scheduler universe jobs submitted via
Condor-C or \Condor{submit} \Opt{-spool} to be held and be unable to run.
The hold reason given was \Expr{File <filename> is missing or not executable}.
\Ticket{2396}

\item \Condor{submit} now exits with an error,
if the command \Expr{hold = True} is in the submit description file
when using \Opt{-spool} or \Opt{-remote} as command-line arguments. 
This combination of settings resulted in jobs being unable to run.
\Ticket{2398}

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-2}Version 7.6.2}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.2 released on July 19, 2011.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Improved how \Condor{dagman} deals with certain parse errors:
missing node name or submit description file in JOB lines.
Also, \Condor{dagman}
now prints DAG input file lines as they are parsed, 
if the debug verbosity setting is 6 or above,
as set with the \Condor{submit\_dag} command line option \Opt{-debug}.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

% gittrac #2275 
\item Fixed a bug in the \Condor{negotiator} that impacted the processing 
of machine \MacroNI{RANK} such that \Condor{startd} \MacroNI{RANK}
preemption only occurred if the preempting user had sufficient user priority 
to claim another machine. 

% gittrac #2235 
\item \Condor{ssh\_to\_job} did not work on systems using the 
dash shell for \Prog{/bin/sh}.

% gittrac #2263 
\item \Condor{ssh\_to\_job} now works with jobs that are run via 
\Prog{glexec}. Previously, it did not. 

% gittrac #1642 
\item When \Prog{glexec} was configured with \Expr{linger=on},
the \Condor{starter} would become unresponsive for the duration of the job. 
For jobs longer than the value set by configuration variable
\MacroNI{NOT\_RESPONDING\_TIMEOUT},
this caused the job to be aborted. 
This also prevented job resource usage monitoring from working 
while the job was running.

% gittrac #2262 
\item Fixed a bug in hierarchical group quotas that caused 
a warning to be logged, despite correct implementation.

% gittrac #2261 
\item \Condor{preen} now properly respects the convention that
the \Opt{-debug} option causes \Procedure{dprintf} logging to \Code{stderr}. 

% gittrac #2253 
% gittrac #2294 
\item Fixed a problem introduced in Condor version 7.5.5 
that could cause the \Condor{schedd} to crash when a job was removed 
during negotiation or when an idle parallel universe job left the queue. 

% gittrac #2247 
\item Fixed a problem that sometimes caused the \Condor{procd} to die.
The chain of events for this fixed bug were that
the \Condor{startd} killed the \Condor{starter} due to unresponsiveness,
and the \Condor{procd} would die.
Then \Condor{startd} logged the message
\Expr{ProcD has failed} and the \Condor{startd} exited. 

% gittrac #2233 
\item Fixed a problem introduced in Condor version 7.6.1 
that caused the \Condor{shadow} to crash without successfully putting the job 
on hold when the user log could not be opened for writing. 

% gittrac #2210 
\item \Condor{history} no longer crashes when given a constraint expression 
longer than 512 characters. 

% gittrac #2248 
\item PBS and LSF grid jobs that arrive in a queue via Condor-C
or remote submission again work properly. 

% gittrac #2210 
\item Fix a bug that can cause the \Condor{gridmanager} to crash 
when a CREAM job ClassAd is missing the \Attr{X509UserProxy} attribute. 

% gittrac #2202 
\item Fix a bug that caused CREAM jobs to have incomplete input files,
if the \Condor{gridmanager} crashed during transfer of those input files. 

% gittrac #2201 
\item Fix a bug in \Condor{submit} that caused grid jobs intended for 
CREAM services whose names contain extra dashes to become held. 

\item Fixed a bug in which \Condor{submit} would try, 
but fail to open the Deltacloud password file,
when the file name was dependent on an expression specified with \Expr{\$\$()}.

% gittrac #2173 
\item If the \Attr{Owner} attribute was not set in the ClassAd associated
with a cluster of jobs,
shared spooled executables were not correctly cleaned up.

% gittrac #2238 
\item Fixed a bug for 64-bit versions of Windows in which the
user \Login{condor-reuse-slot<N>} showed up on the login screen.

% gittrac #2288 
\item Fixed a bug introduced in Condor version 7.5.5,
which changed the default value of the configuration variable
\Macro{INVALID\_LOG\_FILES} from the empty set to a file called \File{core}.
This resulted in core files being removed unexpectedly by \Condor{preen},
and that complicated debugging of Condor.
Previous behavior has been restored.

% gittrac #2278 
\item Fixed a bug existing since Condor version 7.5.5 on Windows platforms.
The installer installed Java jar files in the correct \verb|$(BIN)| directory,
while the value for the configuration variable 
\MacroNI{JAVA\_CLASSPATH\_DEFAULT} utilized the obsolete \verb|$(LIB)|
directory.
The installer now correctly sets \MacroNI{JAVA\_CLASSPATH\_DEFAULT} 
to the \verb|$(BIN)| directory.

% gittrac #2308
\item Fixed a problem causing Condor to fail to start when
privsep was enabled and the environment had any variables
containing newlines.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item For Condor versions 7.6.2, 7.6.1, and 7.6.0,
a bug causes parallel universe jobs to be preempted upon 
renewal of the job lease, 
which by default will happen within 20 minutes, 
essentially meaning that no parallel universe job that takes
longer than 20 minutes can ever finish.
The work around for this bug is to place the following
configuration variable in the configuration of the submit machine:
\begin{verbatim}
  STARTD_SENDS_ALIVES = FALSE
\end{verbatim}
A \Condor{reconfig} is required, 
after which the preempted parallel universe jobs will then be
able to run to completion.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-1}Version 7.6.1}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.1 released on June 3, 2011.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item None.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item None.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

% gittrac #2170 
\item A bug introduced in Condor version 7.5.5 caused the \Condor{schedd}
to die when its attempt to claim a slot for a parallel universe job 
was rejected by the \Condor{startd}. 

% gittrac #2059
\item \Condor{q} \Opt{-analyze} failed to provide detailed analysis of
the job's requirements expression when the expression contained ClassAd
function calls in some cases. 

% gittrac #2192
\item Fixed an incorrect exit code from \Condor{q} 
when invoked with the \Opt{-name} option and using Quill.

%gittrac #2013
\item Fixed a segmentation fault bug introduced in Condor version 7.5.5,
in the checkpoint and restart of jobs using compressed checkpoint images
under the standard universe.
By default, Condor will not compress checkpoints under the standard universe.
Jobs which do not compress their checkpoints were immune to this bug.  
Compressed checkpoints are only available in 32-bit versions of Condor.
Generation of checkpoints in 64-bit versions of Condor are unaffected.

% gittrac #2069
\item In Condor version 7.6.0, the \Condor{schedd} would create a 
spool directory for every job. The corrected and previous behavior 
has now been restored, 
which is to create a spool directory only when needed.

%gittrac #2086
\item Fixed a bug introduced in Condor version 7.5.2,
that caused the \Condor{negotiator} daemon to crash
if any machine ClassAds contained cyclical attribute references.

%gittrac #2101
\item Fixed a bug that caused usage by \SubmitCmd{nice\_user} jobs to
be charged to the user directly rather than `nice-user.\emph{user}'.
This bug was introduced in the 7.5 series.

%gittrac #2081
\item Fixed bugs in the RPM init script that could cause some 
shutdown failures to be unreported, 
and they could cause status requests,
such as \Expr{service condor status},
to always report Condor as inactive.

\item Fixed a bug in the \Condor{gridmanager} that could cause a crash 
when a grid type \SubmitCmd{amazon} job was missing required attributes.

%gittrac #2105
\item Fixed bug in the \Condor{shadow}, in which it would treat 
the closed socket to the execute machine as an error,
after both it had asked for the claim to be deactivated and the 
\Condor{schedd} daemon was busy.  
As a result, a busy \Condor{schedd} could result in the job being re-run.

%gittrac #2109
\item The matchmaking attributes 
\Attr{SubmitterUserResourcesInUse} and \Attr{RemoteUserResourcesInUse} 
no longer ignore \Attr{SlotWeight}, if used by the \Condor{negotiator}.

%gittrac #2102
\item On Windows, the \Condor{kbdd} daemon was missing changes to the
port on which the \Condor{startd} was listening.
This resulted in failure of the \Condor{kbdd} to send updates in 
keyboard and mouse activity,
further causing the failure of policy implementation that relied upon 
knowledge of the activity.

%gittrac #2163
\item Fixed a bug present throughout ClassAds,
in which expressions expecting a floating point value returned an error,
if the expression actually evaluated to a boolean.
This is most common in machine \MacroNI{RANK} expressions.

%gittrac #2172
\item Fixed a bug in the \Condor{negotiator} daemon,
which caused a crash if the \Condor{negotiator} was reconfigured 
during a negotiation cycle, 
but only if hierarchical group quotas were in use.

%gittrac #2162
\item Fixed a bug in which when submitting a job into the \Condor{schedd}
remotely, or with spooling, 
the file transfer plug-ins activated on the submit machine 
and pulled down all the specified URLs in the transfer list 
to the spool directory. 
This behavior has been changed so that URLs are only downloaded 
when the job is actually running with a \Condor{starter} above it. 
This is usually on an execute node, but could also be in the local universe. 

%gittrac #2178
\item Removed the requirement that the Condor GAHP needs DAEMON-level 
authorization access to the \Condor{gridmanager}. 

%gittrac #2181
\item On Windows platforms only, 
fixed a bug that could cause a sporadic access violation 
when a Condor daemon spawned another process.

%gittrac #2191
\item Fixed a bug that would cause the \Condor{startd} to 
incorrectly report \Expr{Benchmarking} as its activity, instead of \Expr{Idle}
when there was a problem launching the benchmarking programs. 

%gittrac #2193
\item Fixed a bug in which the \Condor{startd} can get stuck in a loop,
trying to execute an invalid, non-existent Daemon ClassAd Hook job. 

%gittrac #2088
\item Fixed a bug in which the dedicated scheduler did not correctly 
deactivate claims,
tending to result in jobs that appear to move back and forth between
the \Expr{Idle} and \Expr{Running} states,
with the \Condor{shadow} daemon exiting each time with status 108.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item None.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{\label{sec:New-7-6-0}Version 7.6.0}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\noindent Release Notes:

\begin{itemize}

\item Condor version 7.6.0 released on April 19, 2011.

% gittrac #2016
\item Prior to Condor version 7.5.0, commenting out \MacroNI{PREEN} in the
  default configuration file disabled \Condor{preen}.  
  Starting in Condor version 7.5.0,
  there was an internal default value for \MacroNI{PREEN}, so if
  the configuration variable was not set in any configuration file,
  \Condor{preen} would still run.
  To disable this functionality, \MacroNI{PREEN} can be explicitly set to
  nothing.

\end{itemize}


\noindent New Features:

\begin{itemize}

\item Condor can now create and manage virtual machine instances in a
cloud service via Deltacloud. This is done via the new
\SubmitCmd{deltacloud} grid type in the grid universe.
See section ~\ref{sec:Deltacloud} for details.

% gittrac #1931
\item Improved scalability of submission of cream grid type jobs.

\end{itemize}

\noindent Configuration Variable and ClassAd Attribute Additions and Changes:

\begin{itemize}

\item The new configuration variable \Macro{DELTACLOUD\_GAHP} specifies
where the \Prog{deltacloud\_gahp} binary is located. This binary is used to
manage deltacloud grid type jobs in the grid universe.
In a normal Condor installation, the value should be
\File{\$(SBIN)/deltacloud\_gahp}.

\item Several new job ClassAd attributes have been added to support
the deltacloud grid type in the grid universe.
These attributes are taken from the submit description file:
\AdAttr{DeltacloudUsername},
\AdAttr{DeltacloudPasswordFile},
\AdAttr{DeltacloudImageId},
\AdAttr{DeltacloudRealmId},
\AdAttr{DeltacloudHardwareProfile},
\AdAttr{DeltacloudHardwareProfileCpu},
\AdAttr{DeltacloudHardwareProfileMemory},
\AdAttr{DeltacloudHardwareProfileStorage},
\AdAttr{DeltacloudKeyname}, and
\AdAttr{DeltacloudUserData}.
%\AdAttr{DeltacloudRetryTimeout},
These attributes are set by Condor when the instance runs:
\AdAttr{DeltacloudAvailableActions},
\AdAttr{DeltacloudPrivateNetworkAddresses},
\AdAttr{DeltacloudPublicNetworkAddresses}.
See section ~\ref{sec:Deltacloud} for details of running jobs under
Deltacloud, and see section ~\ref{sec:Job-ClassAd-Attributes}
for definitions of these job ClassAd attributes.

% gittrac #2024
\item The configuration variable \Macro{JAVA\_MAXHEAP\_ARGUMENT} 
  has been removed. 
  This means that Java universe jobs will now run with the JVM's 
  default maximum heap setting,
  unless specified otherwise by the administrator using the configuration
  of \Macro{JAVA\_EXTRA\_ARGUMENTS},
  or by the job via 
  \SubmitCmd{java\_vm\_args} in the submit description file
  as described in section~\ref{sec:Java}.

% gittrac #2066
\item The configuration variable \Macro{TRUST\_UID\_DOMAIN}
  was set to \Expr{True} in the default \File{condor\_config.local}
  in the rpm and Debian packages.  This is no longer the case.
  This setting will therefore use the default value \Expr{False}.

\item The configuration variable \Macro{NEGOTIATOR\_INTERVAL} was set
  to 20 in the default \File{condor\_config.local} in the rpm and
  Debian packages.  This is no longer the case.  This setting
  therefore will use the default value 60.

\end{itemize}

\noindent Bugs Fixed:

\begin{itemize}

% gittrac #1957
\item Fixed a bug in \Condor{dagman} that caused it to fail when in recovery
mode in the face of a specific combination of node job failures with
retries.

% gittrac #1991
\item Fixed a bug that resulted in the spooled user log not being
  fetched by \Condor{transfer\_data}.  Prior to Condor version 7.5.4, this
  problem affected spooled jobs submitted with an explicit list of
  output files to transfer.  In Condor version 7.5.4, this problem also
  affected spooled jobs that auto-detected output files.

% gittrac #1985
\item When a job is submitted with the \Opt{-spool} option to \Condor{submit},
the \Condor{schedd} now correctly writes the submit event to the user log 
in its spool directory. 
Previously, it would try to write the event using the user
log path given to \Condor{submit} by the user, 
which \Condor{submit} may not have access to.

% gittrac #2001
\item Fixed a file descriptor leak in the \Condor{vm-gahp}. The leak would
cause the daemon to fail if a VMware job ran for more than 16 hours on a
Linux machine.

%gittrac #2017
\item Fixed a bug in \Condor{dagman} that caused it to treat any dollar
sign in the log file name of a node job's submit description file
as an illegal \Condor{dagman} macro.
Now only the sequence of characters \Expr{\$(} delimits a macro.

\end{itemize}

\noindent Known Bugs:

\begin{itemize}

\item There are two known issues related to the automatic creation
of checkpoints with the Condor checkpointing library in 
Condor version 7.6.0.
The first is that compression of
standalone checkpoints is disabled for 32-bit binaries.
It was always disabled previously, for 64-bit binaries.
A standalone checkpoint is one that is run outside
of Condor's standard universe.  The second problem has to do with compressed
32-bit checkpoint files within the standard universe.
If a user requests a compressed 32-bit checkpoint in the standard universe,
the resulting checkpoint will not be compressed.
As with standalone checkpoints, this has never been supported
in 64-bit binaries.  We hope to fix both problems in 
Condor version 7.6.1.

\end{itemize}

\noindent Additions and Changes to the Manual:

\begin{itemize}

\item None.

\end{itemize}

