all_target(libclassad.a)

#if CLASSAD_FUNCTIONS
CLASSAD_FLAGS = -DCLASSAD_FUNCTIONS
#endif

C_PLUS_FLAGS = $(CLASSAD_FLAGS) -Wall $(STD_C_PLUS_FLAGS)
CFLAGS = -Wall $(STD_C_FLAGS)
LIB = $(STD_LIBS)


OBJ = ast.o astbase.o buildtable.o parser.o scanner.o registration.o \
	  attrlist.o classad.o classifiedjobs.o environment.o \
	  value.o operators.o evaluateOperators.o classad_instantiate.o \
	  xml_classads.o new_classads.o classad_list.o classad_util.o

depend_cplus_objects_target(OBJ)

library_target(libclassad.a,$(OBJ))

c_plus_target(test,test.o,libclassad.a $(CUTIL_LIB))
c_plus_target(test_classads,test_classads.o,$(LIB))
c_plus_target(test_functions,test_functions.o,$(LIB))
pure_c_plus_target(test_classads.pure,test_classads.o,$(LIB))
pure_c_plus_target(test.pure,test.o,libclassad.a $(CUTIL_LIB))

shared:
	gcc -fPIC -shared -o libshared.so shared.C

clean::
	rm -f *.o libclassad.a

release:: all
stripped:: all
static:: all
html:
