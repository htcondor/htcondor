VM_GAHP_SERVER = condor_vm-gahp

PROGRAMS = $(VM_GAHP_SERVER)

all_target( $(PROGRAMS) condor_vm_xen.sh condor_vm_vmware.pl)

CFLAGS = $(STD_C_FLAGS)

C_PLUS_FLAGS = $(STD_C_PLUS_FLAGS)
LIB = $(DAEMONCORE_LIB) $(STD_LIBS) $(CONFIGURE_GSOAP_LDFLAGS)

soapobjs(vmgahp)

#if IS_LINUX
VM_GAHP_SERVER_OBJ = vmgahp_main.o pbuffer.o vm_request.o vm_type.o vmgahp.o vmgahp_config.o vmgahp_common.o vmware_type.o xen_type.o vmgahp_instantiate.o $(SOAP_OBJS)
#else
VM_GAHP_SERVER_OBJ = vmgahp_main.o pbuffer.o vm_request.o vm_type.o vmgahp.o vmgahp_config.o vmgahp_common.o vmware_type.o vmgahp_instantiate.o $(SOAP_OBJS)
#endif

template_inst( vmgahp_instantiate.C, vmgahp_instantiate.o )

public_c_plus_target($(VM_GAHP_SERVER),sbin,$(VM_GAHP_SERVER_OBJ),$(LIB))
public_copy_target(condor_vm_xen.sh,sbin,condor_vm_xen.sh,EXECUTABLE_MODE)
public_copy_target(condor_vm_vmware.pl,sbin,condor_vm_vmware.pl,EXECUTABLE_MODE)

html:
testbin:: all

IMPORT_LINKS = ../../config/import_links
import(../condor_util_lib, setsyscalls.o)

gen_soapfiles(vmgahp,condorVMgahp)
